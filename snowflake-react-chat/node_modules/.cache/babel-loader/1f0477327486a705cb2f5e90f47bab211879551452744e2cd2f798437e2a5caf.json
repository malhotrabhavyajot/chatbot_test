{"ast":null,"code":"import _objectSpread from\"/workspaces/chatbot_test/snowflake-react-chat/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from'react';import'../styles/style.css';import ChatbotIcon from'../assets/chatbot-toggler.png';import ZSIcon from'../assets/ZS_Associates.png';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HARDCODED_ANSWERS={\"where can i find top 10 gainer prescriber over time?\":\"Top 10 Gainer Prescribers can be found in the Performance Dossier.\",\"what is formulary status?\":\"Formulary Status is the 'MMIT Pharmacy field which shows Preferred/Covered combined with PA/ST Restrictions.\",\"what are the number of current monthly suggestion kpi?\":\"It is the 'Count of monthly suggestions (Call and RTE) for a prescriber.\",\"which dossier gives a detailed analysis about the payors?\":\"You can find detailed analysis about Payor data in the Payor Highlights dossier.\",\"where can i find explanations about different kpis?\":\"Explanations and Calculation of each and every KPI can be found in the Glossary dossier.\",\"what is mkt % lis?\":\"Mkt % LIS is the Percentage of claims where claim type is 'PAID' and channel is 'Medicare' and 'Medicare D', and OPC = $0 - $12 and LIS patient flag = LIS-DE, LIS LTC, LIS-NON-DE, LIS-UNKNOWN for Rolling 3M.\",\"which universes do we show in accounts calculation?\":\"We show three universes Veeva Aligned, Call Plan/DMCP and a combined Veeva Aligned + Call Plan/DMCP universes.\",\"where can i find trx sales trends overtime?\":\"The sales trends for Retail and Non Retail sales can be found in the Performance Dossier.\"};function formatSnowflakeResponse(responseText){try{let json=typeof responseText==='string'?JSON.parse(responseText):responseText;if(Array.isArray(json.data)&&json.data.length>0&&Array.isArray(json.data[0])&&typeof json.data[0][0]==='string'&&json.data[0][0].trim().startsWith('{')){const inner=JSON.parse(json.data[0][0]);if(inner.output)return{type:\"output\",value:inner.output};return{type:\"output\",value:JSON.stringify(inner,null,2)};}if(json.output)return{type:\"output\",value:json.output};if(json.error)return{type:\"error\",value:\"❌ Error: \"+json.error};if(json.code&&json.code!==\"000000\"&&(!json.message||!json.message.toLowerCase().includes(\"executed successfully\"))){return{type:\"error\",value:\"\\u274C Error: \".concat(json.code,\" - \").concat(json.message)};}if(json.message)return{type:\"output\",value:json.message};return{type:\"output\",value:\"No data found.\"};}catch(_unused){return{type:\"error\",value:responseText||\"No response from backend.\"};}}function TypingIndicator(){return/*#__PURE__*/_jsxs(\"span\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]});}const Tooltip=_ref=>{let{children,text}=_ref;return/*#__PURE__*/_jsxs(\"span\",{className:\"feedback-tooltip\",children:[children,/*#__PURE__*/_jsx(\"span\",{className:\"feedback-tooltiptext\",children:text})]});};function getMessageText(msg){var _msg$text$value;if(typeof msg.text===\"string\")return msg.text;if(msg.text&&typeof msg.text===\"object\"&&\"value\"in msg.text)return(_msg$text$value=msg.text.value)!==null&&_msg$text$value!==void 0?_msg$text$value:JSON.stringify(msg.text);if(msg.text!=null)return JSON.stringify(msg.text);return\"\";}function downloadChat(messages){const header=\"Field Insights Assistant - Chat Conversation\\n\\n\";const chatText=messages.map(msg=>\"\".concat(msg.role===\"user\"?\"User\":\"Assistant\",\": \").concat(getMessageText(msg))).join('\\n\\n');const content=header+chatText;const blob=new Blob([content],{type:\"text/plain\"});const link=document.createElement(\"a\");link.href=URL.createObjectURL(blob);link.download=\"chat-session-\".concat(new Date().toISOString().slice(0,19).replace(/:/g,\"-\"),\".txt\");document.body.appendChild(link);link.click();document.body.removeChild(link);}const ChatBot=()=>{const[messages,setMessages]=useState(()=>{const saved=localStorage.getItem('chatMessages');if(saved)return JSON.parse(saved);return[{role:'assistant',text:'Hello 👋! How may I assist you?'}];});const[feedback,setFeedback]=useState({});const[input,setInput]=useState('');const[isOpen,setIsOpen]=useState(false);const[darkMode,setDarkMode]=useState(false);const[isExpanded,setIsExpanded]=useState(false);const[toast,setToast]=useState({message:'',type:'info',visible:false});const[isTyping,setIsTyping]=useState(false);const chatRef=useRef();const inputRef=useRef();useEffect(()=>{var _chatRef$current;(_chatRef$current=chatRef.current)===null||_chatRef$current===void 0?void 0:_chatRef$current.scrollTo({top:chatRef.current.scrollHeight,behavior:'smooth'});},[messages,isTyping,isOpen,isExpanded]);useEffect(()=>{if(inputRef.current){inputRef.current.scrollLeft=inputRef.current.value.length*8;}},[input]);useEffect(()=>{if(toast.visible){const timer=setTimeout(()=>{setToast(t=>_objectSpread(_objectSpread({},t),{},{visible:false}));},1500);return()=>clearTimeout(timer);}},[toast.visible]);const showToast=(msg,type)=>{setToast({message:msg,type:type,visible:true});};// ----------- MAIN LOGIC ----------------\nconst handleSendMessage=async userMessage=>{if(!userMessage||typeof userMessage!==\"string\"||!userMessage.trim())return;setInput('');setIsTyping(true);// HARDCODED ANSWERS (instant, no LLM)\nconst cleaned=userMessage.trim().toLowerCase();const matchedKey=Object.keys(HARDCODED_ANSWERS).find(k=>cleaned.includes(k));if(matchedKey){setIsTyping(false);const updatedMessages=[...messages,{role:'user',text:userMessage},{role:'assistant',text:HARDCODED_ANSWERS[matchedKey]}];setMessages(updatedMessages);localStorage.setItem('chatMessages',JSON.stringify(updatedMessages));return;}// Always send message to clarify endpoint\nconst updatedMessages=[...messages,{role:'user',text:userMessage}];setMessages(updatedMessages);try{const response=await fetch('http://localhost:4000/api/clarify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userMessage})});const{assistant_message,finalized}=await response.json();if(finalized){// Show the final OpenAI prompt as a user message (right side)\nsetMessages(prev=>[...prev,{role:'user',text:assistant_message}]);setIsTyping(true);let finalPrompt=assistant_message;if(typeof finalPrompt===\"string\"&&/^[\"“”'].*[\"“”']$/.test(finalPrompt.trim())){finalPrompt=finalPrompt.trim().replace(/^[\"“”']|[\"“”']$/g,\"\");}let body={statement:\"CALL CUSTOM_AGENT2('\".concat(finalPrompt.replace(/'/g,\"''\"),\"')\")};const snowflakeRes=await fetch('http://localhost:4000/api/snowflake',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});const responseText=await snowflakeRes.text();setIsTyping(false);// Only show \"output\" from response\nconst formatted=formatSnowflakeResponse(responseText);setMessages(prev=>[...prev,{role:\"assistant\",text:formatted.value||\"No response.\"}]);return;}else{setIsTyping(false);setMessages(prev=>[...prev,{role:'assistant',text:assistant_message}]);return;}}catch(error){setIsTyping(false);setMessages(prev=>[...prev,{role:'assistant',text:\"Sorry, I couldn't process your query. Please try again.\"}]);return;}};const handleFeedback=(idx,type)=>{setFeedback(prev=>_objectSpread(_objectSpread({},prev),{},{[idx]:type}));showToast(type===\"up\"?\"Marked as helpful!\":\"Marked as not helpful!\",type===\"up\"?\"success\":\"error\");};const toggleTheme=()=>setDarkMode(prev=>!prev);const renderChatBubbleContent=msg=>{if(typeof msg.text===\"object\"&&msg.text!==null){if(msg.text.type===\"output\")return/*#__PURE__*/_jsx(\"div\",{children:msg.text.value});if(msg.text.type===\"error\")return/*#__PURE__*/_jsx(\"span\",{style:{color:\"#b91c1c\",fontWeight:500},children:msg.text.value});return/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(msg.text.value,null,2)});}return(msg.text||\"\").split('\\n').map((line,i)=>/*#__PURE__*/_jsx(\"div\",{children:line},i));};return/*#__PURE__*/_jsxs(\"div\",{style:{background:'linear-gradient(to bottom right, #f7faff, #e2ecf4)',minHeight:'100vh'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"chatbot-toggler modern-toggler\",onClick:()=>setIsOpen(!isOpen),\"aria-label\":\"Toggle chatbot\",style:{position:'fixed',right:'20px',bottom:'20px',zIndex:10000},children:isOpen?'✖':/*#__PURE__*/_jsx(\"img\",{src:ChatbotIcon,alt:\"Chatbot\",style:{width:48,height:48}})}),isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"chatbot modern-chatbot\"+(darkMode?' dark-mode':'')+(isExpanded?' expanded':' collapsed'),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"chatbot-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"header-title\",children:[\"Field Insights\",/*#__PURE__*/_jsx(\"span\",{className:\"header-title-gradient\",children:\" Assistant\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-controls\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,title:\"Toggle theme\",className:\"header-action-btn\",\"aria-label\":\"Toggle theme\",children:darkMode?/*#__PURE__*/_jsxs(\"svg\",{width:\"25\",height:\"25\",viewBox:\"0 0 24 24\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"5\",fill:\"#7c3aed\"}),/*#__PURE__*/_jsxs(\"g\",{stroke:\"#7c3aed\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"2\",x2:\"12\",y2:\"5\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"12\",y1:\"19\",x2:\"12\",y2:\"22\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"4.22\",y1:\"4.22\",x2:\"6.34\",y2:\"6.34\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"17.66\",y1:\"17.66\",x2:\"19.78\",y2:\"19.78\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"2\",y1:\"12\",x2:\"5\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"19\",y1:\"12\",x2:\"22\",y2:\"12\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"4.22\",y1:\"19.78\",x2:\"6.34\",y2:\"17.66\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"17.66\",y1:\"6.34\",x2:\"19.78\",y2:\"4.22\"})]})]}):/*#__PURE__*/_jsx(\"svg\",{width:\"25\",height:\"25\",viewBox:\"0 0 24 24\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M21 12.79A9 9 0 1111.21 3a7 7 0 0010.02 9.79z\",fill:\"#7c3aed\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMessages([{role:'assistant',text:'Hello 👋! How may I assist you?'}]);localStorage.removeItem('chatMessages');setFeedback({});},title:\"Clear chat\",className:\"header-action-btn\",\"aria-label\":\"Clear chat\",children:/*#__PURE__*/_jsx(\"svg\",{width:\"25\",height:\"25\",fill:\"none\",stroke:\"#7c3aed\",strokeWidth:\"2.1\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M4.93 4.93a10 10 0 1014.14 0M23 4v6h-6\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsExpanded(prev=>!prev),title:isExpanded?'Collapse window':'Expand window',className:\"header-action-btn\",\"aria-label\":isExpanded?'Collapse window':'Expand window',children:isExpanded?/*#__PURE__*/_jsxs(\"svg\",{width:\"25\",height:\"25\",fill:\"none\",stroke:\"#7c3aed\",strokeWidth:\"2.1\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"8 3 3 3 3 8\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"3\",x2:\"10\",y2:\"10\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"16 21 21 21 21 16\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"21\",y1:\"21\",x2:\"14\",y2:\"14\"})]}):/*#__PURE__*/_jsxs(\"svg\",{width:\"25\",height:\"25\",fill:\"none\",stroke:\"#7c3aed\",strokeWidth:\"2.1\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"15 3 21 3 21 9\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"21\",y1:\"3\",x2:\"14\",y2:\"10\"}),/*#__PURE__*/_jsx(\"polyline\",{points:\"9 21 3 21 3 15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"3\",y1:\"21\",x2:\"10\",y2:\"14\"})]})})]})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"chatbox\",ref:chatRef,children:[messages.map((msg,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"chat \".concat(msg.role==='user'?'outgoing':'incoming'),style:{justifyContent:msg.role==='user'?'flex-end':'flex-start'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble \".concat(msg.role),children:renderChatBubbleContent(msg)}),msg.role==='assistant'&&/*#__PURE__*/_jsxs(\"div\",{className:\"feedback-row\",children:[feedback[idx]===undefined&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{text:\"Mark as helpful\",children:/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn\",onClick:()=>handleFeedback(idx,'up'),\"aria-label\":\"Thumbs up\",tabIndex:0,children:\"\\uD83D\\uDC4D\"})}),/*#__PURE__*/_jsx(Tooltip,{text:\"Mark as not helpful\",children:/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn\",onClick:()=>handleFeedback(idx,'down'),\"aria-label\":\"Thumbs down\",tabIndex:0,children:\"\\uD83D\\uDC4E\"})})]}),feedback[idx]==='up'&&/*#__PURE__*/_jsx(Tooltip,{text:\"Marked as helpful!\",children:/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn selected up\",\"aria-label\":\"Thumbs up\",tabIndex:0,children:\"\\uD83D\\uDC4D\"})}),feedback[idx]==='down'&&/*#__PURE__*/_jsx(Tooltip,{text:\"Marked as not helpful\",children:/*#__PURE__*/_jsx(\"button\",{className:\"feedback-btn selected down\",\"aria-label\":\"Thumbs down\",tabIndex:0,children:\"\\uD83D\\uDC4E\"})})]})]},idx)),isTyping&&/*#__PURE__*/_jsx(\"li\",{className:\"chat incoming\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-bubble assistant\",children:/*#__PURE__*/_jsx(TypingIndicator,{})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,placeholder:\"Ask me anything...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSendMessage(input);}},rows:1,className:\"chat-input-textarea\",style:{overflow:'hidden',resize:'none'},disabled:isTyping,autoFocus:isOpen,\"aria-label\":\"Type your message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSendMessage(input),title:\"Send message\",className:\"send-button\".concat(input.trim()?\" has-text\":\"\"),disabled:isTyping||!input.trim(),\"aria-label\":\"Send\",children:/*#__PURE__*/_jsx(\"svg\",{height:\"22\",width:\"22\",viewBox:\"0 0 24 24\",fill:\"none\",style:{display:\"block\"},children:/*#__PURE__*/_jsx(\"path\",{d:\"M4 20L20 12L4 4V10L16 12L4 14V20Z\",fill:\"currentColor\"})})})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"chatbot-footer\",style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",position:\"relative\",width:\"100%\",minHeight:\"40px\",padding:\"8px 0\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadChat(messages),title:\"Download conversation\",className:\"header-action-btn\",\"aria-label\":\"Download chat\",style:{position:\"absolute\",left:0,top:\"45%\",transform:\"translateY(-50%)\",background:\"none\",border:\"none\",cursor:\"pointer\",padding:\"0 0 0 12px\",height:\"100%\",display:\"flex\",alignItems:\"center\"},children:/*#__PURE__*/_jsx(\"svg\",{width:\"22\",height:\"22\",fill:\"none\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 16v-8M12 16l-4-4M12 16l4-4M4 20h16\",stroke:\"#7c3aed\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})})}),/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:[\"Powered by \",/*#__PURE__*/_jsx(\"img\",{src:ZSIcon,alt:\"ZS Associates\",style:{marginLeft:5,height:25}})]})]})]})]});};export default ChatBot;","map":{"version":3,"names":["React","useEffect","useRef","useState","ChatbotIcon","ZSIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HARDCODED_ANSWERS","formatSnowflakeResponse","responseText","json","JSON","parse","Array","isArray","data","length","trim","startsWith","inner","output","type","value","stringify","error","code","message","toLowerCase","includes","concat","_unused","TypingIndicator","className","children","Tooltip","_ref","text","getMessageText","msg","_msg$text$value","downloadChat","messages","header","chatText","map","role","join","content","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","Date","toISOString","slice","replace","body","appendChild","click","removeChild","ChatBot","setMessages","saved","localStorage","getItem","feedback","setFeedback","input","setInput","isOpen","setIsOpen","darkMode","setDarkMode","isExpanded","setIsExpanded","toast","setToast","visible","isTyping","setIsTyping","chatRef","inputRef","_chatRef$current","current","scrollTo","top","scrollHeight","behavior","scrollLeft","timer","setTimeout","t","_objectSpread","clearTimeout","showToast","handleSendMessage","userMessage","cleaned","matchedKey","Object","keys","find","k","updatedMessages","setItem","response","fetch","method","headers","assistant_message","finalized","prev","finalPrompt","test","statement","snowflakeRes","formatted","handleFeedback","idx","toggleTheme","renderChatBubbleContent","style","color","fontWeight","split","line","i","background","minHeight","onClick","position","right","bottom","zIndex","src","alt","width","height","title","viewBox","fill","cx","cy","r","stroke","strokeWidth","x1","y1","x2","y2","d","removeItem","strokeLinecap","strokeLinejoin","points","ref","justifyContent","undefined","tabIndex","placeholder","onChange","e","target","onKeyDown","key","shiftKey","preventDefault","rows","overflow","resize","disabled","autoFocus","display","alignItems","padding","left","transform","border","cursor","marginLeft"],"sources":["/workspaces/chatbot_test/snowflake-react-chat/src/components/ChatBot.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport '../styles/style.css';\nimport ChatbotIcon from '../assets/chatbot-toggler.png';\nimport ZSIcon from '../assets/ZS_Associates.png';\n\nconst HARDCODED_ANSWERS = {\n  \"where can i find top 10 gainer prescriber over time?\": \"Top 10 Gainer Prescribers can be found in the Performance Dossier.\",\n  \"what is formulary status?\": \"Formulary Status is the 'MMIT Pharmacy field which shows Preferred/Covered combined with PA/ST Restrictions.\",\n  \"what are the number of current monthly suggestion kpi?\": \"It is the 'Count of monthly suggestions (Call and RTE) for a prescriber.\",\n  \"which dossier gives a detailed analysis about the payors?\": \"You can find detailed analysis about Payor data in the Payor Highlights dossier.\",\n  \"where can i find explanations about different kpis?\": \"Explanations and Calculation of each and every KPI can be found in the Glossary dossier.\",\n  \"what is mkt % lis?\": \"Mkt % LIS is the Percentage of claims where claim type is 'PAID' and channel is 'Medicare' and 'Medicare D', and OPC = $0 - $12 and LIS patient flag = LIS-DE, LIS LTC, LIS-NON-DE, LIS-UNKNOWN for Rolling 3M.\",\n  \"which universes do we show in accounts calculation?\": \"We show three universes Veeva Aligned, Call Plan/DMCP and a combined Veeva Aligned + Call Plan/DMCP universes.\",\n  \"where can i find trx sales trends overtime?\": \"The sales trends for Retail and Non Retail sales can be found in the Performance Dossier.\"\n};\n\nfunction formatSnowflakeResponse(responseText) {\n  try {\n    let json = typeof responseText === 'string' ? JSON.parse(responseText) : responseText;\n    if (\n      Array.isArray(json.data) &&\n      json.data.length > 0 &&\n      Array.isArray(json.data[0]) &&\n      typeof json.data[0][0] === 'string' &&\n      json.data[0][0].trim().startsWith('{')\n    ) {\n      const inner = JSON.parse(json.data[0][0]);\n      if (inner.output) return { type: \"output\", value: inner.output };\n      return { type: \"output\", value: JSON.stringify(inner, null, 2) };\n    }\n    if (json.output) return { type: \"output\", value: json.output };\n    if (json.error) return { type: \"error\", value: \"❌ Error: \" + json.error };\n    if (\n      json.code &&\n      json.code !== \"000000\" &&\n      (!json.message || !json.message.toLowerCase().includes(\"executed successfully\"))\n    ) {\n      return { type: \"error\", value: `❌ Error: ${json.code} - ${json.message}` };\n    }\n    if (json.message) return { type: \"output\", value: json.message };\n    return { type: \"output\", value: \"No data found.\" };\n  } catch {\n    return { type: \"error\", value: responseText || \"No response from backend.\" };\n  }\n}\n\nfunction TypingIndicator() {\n  return (\n    <span className=\"typing-indicator\">\n      <span></span><span></span><span></span>\n    </span>\n  );\n}\n\nconst Tooltip = ({ children, text }) => (\n  <span className=\"feedback-tooltip\">\n    {children}\n    <span className=\"feedback-tooltiptext\">{text}</span>\n  </span>\n);\n\nfunction getMessageText(msg) {\n  if (typeof msg.text === \"string\") return msg.text;\n  if (msg.text && typeof msg.text === \"object\" && \"value\" in msg.text)\n    return msg.text.value ?? JSON.stringify(msg.text);\n  if (msg.text != null) return JSON.stringify(msg.text);\n  return \"\";\n}\n\nfunction downloadChat(messages) {\n  const header = \"Field Insights Assistant - Chat Conversation\\n\\n\";\n  const chatText = messages.map(\n    (msg) => `${msg.role === \"user\" ? \"User\" : \"Assistant\"}: ${getMessageText(msg)}`\n  ).join('\\n\\n');\n  const content = header + chatText;\n  const blob = new Blob([content], { type: \"text/plain\" });\n  const link = document.createElement(\"a\");\n  link.href = URL.createObjectURL(blob);\n  link.download = `chat-session-${new Date().toISOString().slice(0,19).replace(/:/g,\"-\")}.txt`;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\n\nconst ChatBot = () => {\n  const [messages, setMessages] = useState(() => {\n    const saved = localStorage.getItem('chatMessages');\n    if (saved) return JSON.parse(saved);\n    return [{ role: 'assistant', text: 'Hello 👋! How may I assist you?' }];\n  });\n\n  const [feedback, setFeedback] = useState({});\n  const [input, setInput] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [toast, setToast] = useState({ message: '', type: 'info', visible: false });\n  const [isTyping, setIsTyping] = useState(false);\n\n  const chatRef = useRef();\n  const inputRef = useRef();\n\n  useEffect(() => {\n    chatRef.current?.scrollTo({ top: chatRef.current.scrollHeight, behavior: 'smooth' });\n  }, [messages, isTyping, isOpen, isExpanded]);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.scrollLeft = inputRef.current.value.length * 8;\n    }\n  }, [input]);\n\n  useEffect(() => {\n    if (toast.visible) {\n      const timer = setTimeout(() => {\n        setToast(t => ({ ...t, visible: false }));\n      }, 1500);\n      return () => clearTimeout(timer);\n    }\n  }, [toast.visible]);\n\n  const showToast = (msg, type) => {\n    setToast({ message: msg, type: type, visible: true });\n  };\n\n  // ----------- MAIN LOGIC ----------------\n  const handleSendMessage = async (userMessage) => {\n    if (!userMessage || typeof userMessage !== \"string\" || !userMessage.trim()) return;\n    setInput('');\n    setIsTyping(true);\n\n    // HARDCODED ANSWERS (instant, no LLM)\n    const cleaned = userMessage.trim().toLowerCase();\n    const matchedKey = Object.keys(HARDCODED_ANSWERS).find(k => cleaned.includes(k));\n    if (matchedKey) {\n      setIsTyping(false);\n      const updatedMessages = [...messages, { role: 'user', text: userMessage }, { role: 'assistant', text: HARDCODED_ANSWERS[matchedKey] }];\n      setMessages(updatedMessages);\n      localStorage.setItem('chatMessages', JSON.stringify(updatedMessages));\n      return;\n    }\n\n    // Always send message to clarify endpoint\n    const updatedMessages = [...messages, { role: 'user', text: userMessage }];\n    setMessages(updatedMessages);\n\n    try {\n      const response = await fetch('http://localhost:4000/api/clarify', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userMessage })\n      });\n      const { assistant_message, finalized } = await response.json();\n\n      if (finalized) {\n        // Show the final OpenAI prompt as a user message (right side)\n        setMessages(prev => [...prev, { role: 'user', text: assistant_message }]);\n        setIsTyping(true);\n\n        let finalPrompt = assistant_message;\n        if (typeof finalPrompt === \"string\" && /^[\"“”'].*[\"“”']$/.test(finalPrompt.trim())) {\n          finalPrompt = finalPrompt.trim().replace(/^[\"“”']|[\"“”']$/g, \"\");\n        }\n\n        let body = { statement: `CALL CUSTOM_AGENT2('${finalPrompt.replace(/'/g, \"''\")}')` };\n        const snowflakeRes = await fetch('http://localhost:4000/api/snowflake', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(body)\n        });\n        const responseText = await snowflakeRes.text();\n\n        setIsTyping(false);\n\n        // Only show \"output\" from response\n        const formatted = formatSnowflakeResponse(responseText);\n        setMessages(prev => [\n          ...prev,\n          { role: \"assistant\", text: formatted.value || \"No response.\" }\n        ]);\n        return;\n      } else {\n        setIsTyping(false);\n        setMessages(prev => [...prev, { role: 'assistant', text: assistant_message }]);\n        return;\n      }\n    } catch (error) {\n      setIsTyping(false);\n      setMessages(prev => [...prev, { role: 'assistant', text: \"Sorry, I couldn't process your query. Please try again.\" }]);\n      return;\n    }\n  };\n\n  const handleFeedback = (idx, type) => {\n    setFeedback(prev => ({ ...prev, [idx]: type }));\n    showToast(type === \"up\" ? \"Marked as helpful!\" : \"Marked as not helpful!\", type === \"up\" ? \"success\" : \"error\");\n  };\n\n  const toggleTheme = () => setDarkMode(prev => !prev);\n\n  const renderChatBubbleContent = (msg) => {\n    if (typeof msg.text === \"object\" && msg.text !== null) {\n      if (msg.text.type === \"output\") return <div>{msg.text.value}</div>;\n      if (msg.text.type === \"error\") return <span style={{ color: \"#b91c1c\", fontWeight: 500 }}>{msg.text.value}</span>;\n      return <pre>{JSON.stringify(msg.text.value, null, 2)}</pre>;\n    }\n    return (msg.text || \"\").split('\\n').map((line, i) => (\n      <div key={i}>{line}</div>\n    ));\n  };\n\n  return (\n    <div style={{ background: 'linear-gradient(to bottom right, #f7faff, #e2ecf4)', minHeight: '100vh' }}>\n      <button\n        className=\"chatbot-toggler modern-toggler\"\n        onClick={() => setIsOpen(!isOpen)}\n        aria-label=\"Toggle chatbot\"\n        style={{ position: 'fixed', right: '20px', bottom: '20px', zIndex: 10000 }}>\n        {isOpen ? '✖' : <img src={ChatbotIcon} alt=\"Chatbot\" style={{ width: 48, height: 48 }} />}\n      </button>\n      {isOpen && (\n        <div\n          className={\n            `chatbot modern-chatbot` +\n            (darkMode ? ' dark-mode' : '') +\n            (isExpanded ? ' expanded' : ' collapsed')\n          }\n        >\n          <header className=\"chatbot-header\">\n            <span className=\"header-title\">\n              Field Insights<span className=\"header-title-gradient\"> Assistant</span>\n            </span>\n            <div className=\"header-controls\">\n              <div className=\"header-actions\">\n                <button onClick={toggleTheme} title=\"Toggle theme\" className=\"header-action-btn\" aria-label=\"Toggle theme\">\n                  {darkMode ? (\n                    <svg width=\"25\" height=\"25\" viewBox=\"0 0 24 24\" fill=\"none\">\n                      <circle cx=\"12\" cy=\"12\" r=\"5\" fill=\"#7c3aed\" />\n                      <g stroke=\"#7c3aed\" strokeWidth=\"2\">\n                        <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"5\" />\n                        <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"22\" />\n                        <line x1=\"4.22\" y1=\"4.22\" x2=\"6.34\" y2=\"6.34\" />\n                        <line x1=\"17.66\" y1=\"17.66\" x2=\"19.78\" y2=\"19.78\" />\n                        <line x1=\"2\" y1=\"12\" x2=\"5\" y2=\"12\" />\n                        <line x1=\"19\" y1=\"12\" x2=\"22\" y2=\"12\" />\n                        <line x1=\"4.22\" y1=\"19.78\" x2=\"6.34\" y2=\"17.66\" />\n                        <line x1=\"17.66\" y1=\"6.34\" x2=\"19.78\" y2=\"4.22\" />\n                      </g>\n                    </svg>\n                  ) : (\n                    <svg width=\"25\" height=\"25\" viewBox=\"0 0 24 24\" fill=\"none\">\n                      <path d=\"M21 12.79A9 9 0 1111.21 3a7 7 0 0010.02 9.79z\" fill=\"#7c3aed\" />\n                    </svg>\n                  )}\n                </button>\n                <button\n                  onClick={() => {\n                    setMessages([{ role: 'assistant', text: 'Hello 👋! How may I assist you?' }]);\n                    localStorage.removeItem('chatMessages');\n                    setFeedback({});\n                  }}\n                  title=\"Clear chat\"\n                  className=\"header-action-btn\"\n                  aria-label=\"Clear chat\"\n                >\n                  <svg width=\"25\" height=\"25\" fill=\"none\" stroke=\"#7c3aed\" strokeWidth=\"2.1\" viewBox=\"0 0 24 24\">\n                    <path d=\"M4.93 4.93a10 10 0 1014.14 0M23 4v6h-6\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                  </svg>\n                </button>\n                <button\n                  onClick={() => setIsExpanded((prev) => !prev)}\n                  title={isExpanded ? 'Collapse window' : 'Expand window'}\n                  className=\"header-action-btn\"\n                  aria-label={isExpanded ? 'Collapse window' : 'Expand window'}\n                >\n                  {isExpanded ? (\n                    <svg width=\"25\" height=\"25\" fill=\"none\" stroke=\"#7c3aed\" strokeWidth=\"2.1\" viewBox=\"0 0 24 24\">\n                      <polyline points=\"8 3 3 3 3 8\" />\n                      <line x1=\"3\" y1=\"3\" x2=\"10\" y2=\"10\" />\n                      <polyline points=\"16 21 21 21 21 16\" />\n                      <line x1=\"21\" y1=\"21\" x2=\"14\" y2=\"14\" />\n                    </svg>\n                  ) : (\n                    <svg width=\"25\" height=\"25\" fill=\"none\" stroke=\"#7c3aed\" strokeWidth=\"2.1\" viewBox=\"0 0 24 24\">\n                      <polyline points=\"15 3 21 3 21 9\" />\n                      <line x1=\"21\" y1=\"3\" x2=\"14\" y2=\"10\" />\n                      <polyline points=\"9 21 3 21 3 15\" />\n                      <line x1=\"3\" y1=\"21\" x2=\"10\" y2=\"14\" />\n                    </svg>\n                  )}\n                </button>\n              </div>\n            </div>\n          </header>\n          <ul className=\"chatbox\" ref={chatRef}>\n            {messages.map((msg, idx) => (\n              <li\n                key={idx}\n                className={`chat ${msg.role === 'user' ? 'outgoing' : 'incoming'}`}\n                style={{ justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start' }}\n              >\n                <div className={`chat-bubble ${msg.role}`}>\n                  {renderChatBubbleContent(msg)}\n                </div>\n                {msg.role === 'assistant' && (\n                  <div className=\"feedback-row\">\n                    {feedback[idx] === undefined && (\n                      <>\n                        <Tooltip text=\"Mark as helpful\">\n                          <button\n                            className=\"feedback-btn\"\n                            onClick={() => handleFeedback(idx, 'up')}\n                            aria-label=\"Thumbs up\"\n                            tabIndex={0}\n                          >👍</button>\n                        </Tooltip>\n                        <Tooltip text=\"Mark as not helpful\">\n                          <button\n                            className=\"feedback-btn\"\n                            onClick={() => handleFeedback(idx, 'down')}\n                            aria-label=\"Thumbs down\"\n                            tabIndex={0}\n                          >👎</button>\n                        </Tooltip>\n                      </>\n                    )}\n                    {feedback[idx] === 'up' && (\n                      <Tooltip text=\"Marked as helpful!\">\n                        <button className=\"feedback-btn selected up\" aria-label=\"Thumbs up\" tabIndex={0}>👍</button>\n                      </Tooltip>\n                    )}\n                    {feedback[idx] === 'down' && (\n                      <Tooltip text=\"Marked as not helpful\">\n                        <button className=\"feedback-btn selected down\" aria-label=\"Thumbs down\" tabIndex={0}>👎</button>\n                      </Tooltip>\n                    )}\n                  </div>\n                )}\n              </li>\n            ))}\n            {isTyping && (\n              <li className=\"chat incoming\">\n                <div className=\"chat-bubble assistant\">\n                  <TypingIndicator />\n                </div>\n              </li>\n            )}\n          </ul>\n          <div className=\"chat-input\">\n            <textarea\n              ref={inputRef}\n              placeholder=\"Ask me anything...\"\n              value={input}\n              onChange={e => setInput(e.target.value)}\n              onKeyDown={e => {\n                if (e.key === 'Enter' && !e.shiftKey) {\n                  e.preventDefault();\n                  handleSendMessage(input);\n                }\n              }}\n              rows={1}\n              className=\"chat-input-textarea\"\n              style={{ overflow: 'hidden', resize: 'none' }}\n              disabled={isTyping}\n              autoFocus={isOpen}\n              aria-label=\"Type your message\"\n            />\n            <button\n              onClick={() => handleSendMessage(input)}\n              title=\"Send message\"\n              className={`send-button${input.trim() ? \" has-text\" : \"\"}`}\n              disabled={isTyping || !input.trim()}\n              aria-label=\"Send\"\n            >\n              <svg height=\"22\" width=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" style={{ display: \"block\" }}>\n                <path d=\"M4 20L20 12L4 4V10L16 12L4 14V20Z\" fill=\"currentColor\" />\n              </svg>\n            </button>\n          </div>\n<footer\n  className=\"chatbot-footer\"\n  style={{\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    position: \"relative\",\n    width: \"100%\",\n    minHeight: \"40px\",\n    padding: \"8px 0\",\n  }}\n>\n  {/* Download button absolutely positioned at left */}\n  <button\n    onClick={() => downloadChat(messages)}\n    title=\"Download conversation\"\n    className=\"header-action-btn\"\n    aria-label=\"Download chat\"\n    style={{\n      position: \"absolute\",\n      left: 0,\n      top: \"45%\",\n      transform: \"translateY(-50%)\",\n      background: \"none\",\n      border: \"none\",\n      cursor: \"pointer\",\n      padding: \"0 0 0 12px\",\n      height: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\"\n    }}\n  >\n    <svg width=\"22\" height=\"22\" fill=\"none\" viewBox=\"0 0 24 24\">\n      <path d=\"M12 16v-8M12 16l-4-4M12 16l4-4M4 20h16\" stroke=\"#7c3aed\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n    </svg>\n  </button>\n  {/* Centered powered by ZS */}\n  <span style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n    Powered by <img src={ZSIcon} alt=\"ZS Associates\" style={{ marginLeft: 5, height: 25 }} />\n  </span>\n</footer>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatBot;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}